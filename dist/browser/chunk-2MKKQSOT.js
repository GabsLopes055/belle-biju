import{e as l}from"./chunk-LQRXZWZJ.js";import{R as a,W as s,Yb as p,c as f}from"./chunk-YFERI2R3.js";var o=class extends Error{};o.prototype.name="InvalidTokenError";function m(r){return decodeURIComponent(atob(r).replace(/(.)/g,(i,e)=>{let t=e.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t}))}function h(r){let i=r.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return m(i)}catch{return atob(i)}}function u(r,i){if(typeof r!="string")throw new o("Invalid token specified: must be a string");i||(i={});let e=i.header===!0?0:1,t=r.split(".")[e];if(typeof t!="string")throw new o(`Invalid token specified: missing part #${e+1}`);let n;try{n=h(t)}catch(c){throw new o(`Invalid token specified: invalid base64 for part #${e+1} (${c.message})`)}try{return JSON.parse(n)}catch(c){throw new o(`Invalid token specified: invalid json for part #${e+1} (${c.message})`)}}var d=(()=>{class r{constructor(){}isTokenValid(e){if(!e)return!1;let t=this.decodeToken(e);if(!t)return!1;let n=this.getExpiryDate(t);return n?n>new Date:!1}decodeToken(e){try{return u(e)}catch{return null}}getExpiryDate(e){if(!e||!e.exp)return null;let t=new Date(0);return t.setUTCSeconds(e.exp),t}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var I=(()=>{class r{constructor(e,t,n){this.route=e,this.jwtService=t,this.menuService=n}isLogin(){return f(this,null,function*(){let e=yield window.sessionStorage.getItem("token");return this.jwtService.isTokenValid(e)?!0:(window.sessionStorage.removeItem("token"),this.route.navigate(["login"]),this.menuService._menu.next([]),!1)})}static{this.\u0275fac=function(t){return new(t||r)(s(l),s(d),s(p))}}static{this.\u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{d as a,I as b};
