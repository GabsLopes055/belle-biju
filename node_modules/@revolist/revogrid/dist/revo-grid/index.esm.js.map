{"version":3,"names":["REVOGRID_EVENTS","Map","AutoAddRowsPlugin","BasePlugin","constructor","revogrid","providers","super","this","addEventListener","evt","handleBeforePasteApply","event","start","selection","focused","isEditing","edit","rowLength","data","stores","rgRow","store","get","length","endRow","y","detail","parsed","count","newRows","Array","from","_","i","index","emit","defaultPrevented","items","map","j","setData"],"sources":["src/types/events.ts","src/plugins/add-rows-on-paste.plugin.ts"],"sourcesContent":["\nexport type RevogridEvents = 'contentsizechanged'|\n  'beforeedit'|\n  'beforerangeedit'|\n  'afteredit'|\n  'beforeautofill'|\n  'beforerange'|\n  'afterfocus'|\n  'roworderchanged'|\n  'beforesortingapply'|\n  'beforesorting'|\n  'rowdragstart'|\n  'headerclick'|\n  'beforecellfocus'|\n  'beforefocuslost'|\n  'beforesourceset'|\n  'beforeanysource'|\n  'aftersourceset'|\n  'afteranysource'|\n  'beforecolumnsset'|\n  'beforecolumnapplied'|\n  'aftercolumnsset'|\n  'beforefilterapply'|\n  'beforefiltertrimmed'|\n  'beforetrimmed'|\n  'aftertrimmed'|\n  'viewportscroll'|\n  'beforeexport'|\n  'beforeeditstart'|\n  'aftercolumnresize'|\n  'beforerowdefinition'|\n  'filterconfigchanged'|\n  'sortingconfigchanged'|\n  'rowheaderschanged'|\n  'beforegridrender'|\n  'aftergridrender'|\n  'aftergridinit'|\n  'additionaldatachanged'|\n  'afterthemechanged'|\n  'created'|\n  'beforepaste'|\n  'beforepasteapply'|\n  'pasteregion'|\n  'afterpasteapply'|\n  'beforecut'|\n  'clearregion'|\n  'beforecopy'|\n  'beforecopyapply'|\n  'copyregion'|\n  'beforerowrender'|\n  'afterrender'|\n  'beforecellrender'|\n  'beforedatarender'|\n  'dragstartcell'|\n  'celledit'|\n  'closeedit'|\n  'filterChange'|\n  'resetChange'|\n  'beforefocusrender'|\n  'beforescrollintoview'|\n  'afterfocus'|\n  'beforeheaderclick'|\n  'headerresize'|\n  'beforeheaderresize'|\n  'headerdblclick'|\n  'beforeheaderrender'|\n  'afterheaderrender'|\n  'rowdragstartinit'|\n  'rowdragendinit'|\n  'rowdragmoveinit'|\n  'rowdragmousemove'|\n  'rowdropinit'|\n  'roworderchange'|\n  'beforecopyregion'|\n  'beforepasteregion'|\n  'celleditapply'|\n  'beforecellfocusinit'|\n  'beforenextvpfocus'|\n  'setedit'|\n  'beforeapplyrange'|\n  'beforesetrange'|\n  'setrange'|\n  'beforeeditrender'|\n  'selectall'|\n  'canceledit'|\n  'settemprange'|\n  'beforesettemprange'|\n  'applyfocus'|\n  'focuscell'|\n  'beforerangedataapply'|\n  'selectionchangeinit'|\n  'beforerangecopyapply'|\n  'rangeeditapply'|\n  'clipboardrangecopy'|\n  'clipboardrangepaste'|\n  'beforekeydown'|\n  'beforekeyup'|\n  'beforecellsave'|\n  'scrollview'|\n  'ref'|\n  'scrollvirtual'|\n  'scrollviewport'|\n  'resizeviewport'|\n  'scrollchange'|\n  'scrollviewportsilent'|\n  'html'\nexport const REVOGRID_EVENTS = new Map<RevogridEvents, RevogridEvents>([\n  ['contentsizechanged', 'contentsizechanged'],\n  ['beforeedit', 'beforeedit'],\n  ['beforerangeedit', 'beforerangeedit'],\n  ['afteredit', 'afteredit'],\n  ['beforeautofill', 'beforeautofill'],\n  ['beforerange', 'beforerange'],\n  ['afterfocus', 'afterfocus'],\n  ['roworderchanged', 'roworderchanged'],\n  ['beforesortingapply', 'beforesortingapply'],\n  ['beforesorting', 'beforesorting'],\n  ['rowdragstart', 'rowdragstart'],\n  ['headerclick', 'headerclick'],\n  ['beforecellfocus', 'beforecellfocus'],\n  ['beforefocuslost', 'beforefocuslost'],\n  ['beforesourceset', 'beforesourceset'],\n  ['beforeanysource', 'beforeanysource'],\n  ['aftersourceset', 'aftersourceset'],\n  ['afteranysource', 'afteranysource'],\n  ['beforecolumnsset', 'beforecolumnsset'],\n  ['beforecolumnapplied', 'beforecolumnapplied'],\n  ['aftercolumnsset', 'aftercolumnsset'],\n  ['beforefilterapply', 'beforefilterapply'],\n  ['beforefiltertrimmed', 'beforefiltertrimmed'],\n  ['beforetrimmed', 'beforetrimmed'],\n  ['aftertrimmed', 'aftertrimmed'],\n  ['viewportscroll', 'viewportscroll'],\n  ['beforeexport', 'beforeexport'],\n  ['beforeeditstart', 'beforeeditstart'],\n  ['aftercolumnresize', 'aftercolumnresize'],\n  ['beforerowdefinition', 'beforerowdefinition'],\n  ['filterconfigchanged', 'filterconfigchanged'],\n  ['sortingconfigchanged', 'sortingconfigchanged'],\n  ['rowheaderschanged', 'rowheaderschanged'],\n  ['beforegridrender', 'beforegridrender'],\n  ['aftergridrender', 'aftergridrender'],\n  ['aftergridinit', 'aftergridinit'],\n  ['additionaldatachanged', 'additionaldatachanged'],\n  ['afterthemechanged', 'afterthemechanged'],\n  ['created', 'created'],\n  ['beforepaste', 'beforepaste'],\n  ['beforepasteapply', 'beforepasteapply'],\n  ['pasteregion', 'pasteregion'],\n  ['afterpasteapply', 'afterpasteapply'],\n  ['beforecut', 'beforecut'],\n  ['clearregion', 'clearregion'],\n  ['beforecopy', 'beforecopy'],\n  ['beforecopyapply', 'beforecopyapply'],\n  ['copyregion', 'copyregion'],\n  ['beforerowrender', 'beforerowrender'],\n  ['afterrender', 'afterrender'],\n  ['beforecellrender', 'beforecellrender'],\n  ['beforedatarender', 'beforedatarender'],\n  ['dragstartcell', 'dragstartcell'],\n  ['celledit', 'celledit'],\n  ['closeedit', 'closeedit'],\n  ['filterChange', 'filterChange'],\n  ['resetChange', 'resetChange'],\n  ['beforefocusrender', 'beforefocusrender'],\n  ['beforescrollintoview', 'beforescrollintoview'],\n  ['afterfocus', 'afterfocus'],\n  ['beforeheaderclick', 'beforeheaderclick'],\n  ['headerresize', 'headerresize'],\n  ['beforeheaderresize', 'beforeheaderresize'],\n  ['headerdblclick', 'headerdblclick'],\n  ['beforeheaderrender', 'beforeheaderrender'],\n  ['afterheaderrender', 'afterheaderrender'],\n  ['rowdragstartinit', 'rowdragstartinit'],\n  ['rowdragendinit', 'rowdragendinit'],\n  ['rowdragmoveinit', 'rowdragmoveinit'],\n  ['rowdragmousemove', 'rowdragmousemove'],\n  ['rowdropinit', 'rowdropinit'],\n  ['roworderchange', 'roworderchange'],\n  ['beforecopyregion', 'beforecopyregion'],\n  ['beforepasteregion', 'beforepasteregion'],\n  ['celleditapply', 'celleditapply'],\n  ['beforecellfocusinit', 'beforecellfocusinit'],\n  ['beforenextvpfocus', 'beforenextvpfocus'],\n  ['setedit', 'setedit'],\n  ['beforeapplyrange', 'beforeapplyrange'],\n  ['beforesetrange', 'beforesetrange'],\n  ['setrange', 'setrange'],\n  ['beforeeditrender', 'beforeeditrender'],\n  ['selectall', 'selectall'],\n  ['canceledit', 'canceledit'],\n  ['settemprange', 'settemprange'],\n  ['beforesettemprange', 'beforesettemprange'],\n  ['applyfocus', 'applyfocus'],\n  ['focuscell', 'focuscell'],\n  ['beforerangedataapply', 'beforerangedataapply'],\n  ['selectionchangeinit', 'selectionchangeinit'],\n  ['beforerangecopyapply', 'beforerangecopyapply'],\n  ['rangeeditapply', 'rangeeditapply'],\n  ['clipboardrangecopy', 'clipboardrangecopy'],\n  ['clipboardrangepaste', 'clipboardrangepaste'],\n  ['beforekeydown', 'beforekeydown'],\n  ['beforekeyup', 'beforekeyup'],\n  ['beforecellsave', 'beforecellsave'],\n  ['scrollview', 'scrollview'],\n  ['ref', 'ref'],\n  ['scrollvirtual', 'scrollvirtual'],\n  ['scrollviewport', 'scrollviewport'],\n  ['resizeviewport', 'resizeviewport'],\n  ['scrollchange', 'scrollchange'],\n  ['scrollviewportsilent', 'scrollviewportsilent'],\n  ['html', 'html']\n]);","import type { PluginProviders } from '../types/plugin.types';\nimport { BasePlugin } from './base.plugin';\n\n/**\n * Automatically adds new rows when pasted data is larger than current rows\n * @event newRows - is triggered when new rows are added. Data of new rows can be filled with default values. If the event is prevented, no rows will be added. Event data: { newRows: RowData[] }\n */\nexport class AutoAddRowsPlugin extends BasePlugin {\n  constructor(revogrid: HTMLRevoGridElement, providers: PluginProviders) {\n    super(revogrid, providers);\n    this.addEventListener('beforepasteapply', evt =>\n      this.handleBeforePasteApply(evt),\n    );\n  }\n\n  handleBeforePasteApply(\n    event: CustomEvent<{\n      raw: string;\n      parsed: string[][];\n      event: ClipboardEvent;\n    }>,\n  ) {\n    const start = this.providers.selection.focused;\n    const isEditing = this.providers.selection.edit != null;\n\n    if (!start || isEditing) {\n      return;\n    }\n\n    const rowLength =\n      this.providers.data.stores.rgRow.store.get('items').length;\n\n    const endRow = start.y + event.detail.parsed.length;\n\n    if (rowLength < endRow) {\n      const count = endRow - rowLength;\n      const newRows = Array.from({ length: count }, (_, i) => ({\n        index: rowLength + i,\n        data: {},\n      }));\n\n      const event = this.emit('newRows', { newRows: newRows });\n\n      if (event.defaultPrevented) {\n        return;\n      }\n\n      const items = [\n        ...this.providers.data.stores.rgRow.store.get('source'),\n        ...event.detail.newRows.map(j => j.data),\n      ];\n\n      this.providers.data.setData(items);\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]}