{"version":3,"file":"header-renderer.js","sourceRoot":"","sources":["../../../src/components/header/header-renderer.tsx"],"names":[],"mappings":"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","sourcesContent":["import { h } from '@stencil/core';\nimport type {\n  VirtualPositionItem,\n  ColumnTemplateProp,\n  InitialHeaderClick,\n  RangeArea\n} from '@type';\n\nimport { FilterButton } from '../../plugins/filter/filter.button';\nimport { SortingSign } from '../../plugins/sorting/sorting.sign';\nimport { ResizeEvent, ResizeProps } from './resizable.directive';\nimport {\n  DATA_COL,\n  FOCUS_CLASS,\n  HEADER_CLASS,\n  HEADER_SORTABLE_CLASS,\n  MIN_COL_SIZE,\n} from '../../utils/consts';\nimport { HeaderCellRenderer } from './header-cell-renderer';\nimport { ResizableElementHTMLAttributes } from './resizable.element';\n\nexport type HeaderRenderProps = {\n  column: VirtualPositionItem;\n  additionalData: any;\n  data: ColumnTemplateProp;\n  range?: RangeArea | null;\n  canResize?: boolean;\n  canFilter?: boolean;\n  onResize?(e: ResizeEvent): void;\n  onClick?(data: InitialHeaderClick): void;\n  onDblClick?(data: InitialHeaderClick): void;\n} & Partial<Pick<ResizeProps, 'active'>>;\n\nconst HeaderRenderer = (p: HeaderRenderProps): ReturnType<typeof h> => {\n  const cellClass: { [key: string]: boolean } = {\n    [HEADER_CLASS]: true,\n    [HEADER_SORTABLE_CLASS]: !!p.data?.sortable,\n  };\n  if (p.data?.order) {\n    cellClass[p.data.order] = true;\n  }\n  const dataProps: ResizableElementHTMLAttributes = {\n    [DATA_COL]: p.column.itemIndex,\n    canResize: p.canResize,\n    minWidth: p.data?.minSize || MIN_COL_SIZE,\n    maxWidth: p.data?.maxSize,\n    active: p.active || ['r'],\n    class: cellClass,\n    style: {\n      width: `${p.column.size}px`,\n      transform: `translateX(${p.column.start}px)`,\n    },\n    onResize: p.onResize,\n    onDblClick(originalEvent: MouseEvent) {\n      p.onDblClick?.({\n        column: p.data,\n        index: p.column.itemIndex,\n        originalEvent,\n        providers: p.data.providers,\n      });\n    },\n    onClick(originalEvent: MouseEvent) {\n      if (originalEvent.defaultPrevented || !p.onClick) {\n        return;\n      }\n      p.onClick({\n        column: p.data,\n        index: p.column.itemIndex,\n        originalEvent,\n        providers: p.data.providers,\n      });\n    },\n  };\n  if (p.range) {\n    if (p.column.itemIndex >= p.range.x && p.column.itemIndex <= p.range.x1) {\n      if (typeof dataProps.class === 'object') {\n        dataProps.class[FOCUS_CLASS] = true;\n      }\n    }\n  }\n  return (\n    <HeaderCellRenderer\n      data={p.data}\n      props={dataProps}\n      additionalData={p.additionalData}\n    >\n      {<SortingSign column={p.data} />}\n      {p.canFilter && p.data?.filter !== false ? (\n        <FilterButton column={p.data} />\n      ) : (\n        ''\n      )}\n    </HeaderCellRenderer>\n  );\n};\n\nexport default HeaderRenderer;\n"]}